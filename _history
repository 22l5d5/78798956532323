{"entries":[{"timestamp":1736951965165,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"diffs":[[0,"iables><"],[1,"block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"!;aw?f/:_cAISFGu5HGd\">基礎速度</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X`[1P:~|(:3a.nzX{I1b\">kp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"vR?D!*fsjP@G-YWLRsoq\">kd</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">210</field></shadow></value></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"316\" y=\"0\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button A pressed event</comment><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+4/0uZv~t]mFRrnnXV{e\">地圖資料</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"function_call\"><mutation name=\"巡白線\" functionid=\"LQ)]*f{t8vlA9N$)B(#G\"></mutation><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Square</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"837\" y=\"0\"><field name=\"NAME\">Button.B</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button B pressed event</comment><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"1359\" y=\"0\"><mutation name=\"執行動作\" functionid=\"Dj.l}RQ!qwb8G9(Sc/jY\"><arg name=\"動作\" id=\"0rfzua8361kvnlqnsuwhg\" type=\"string\"></arg></mutation><field name=\"function_name\">執行動作</field><comment pinned=\"false\" h=\"80\" w=\"160\">Action execution based on map data</comment><value name=\"0rfzua8361kvnlqnsuwhg\"><shadow type=\"argument_reporter_string\"><field name=\"VALUE\">動作</field></shadow></value><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Control logic for turning left, right, etc.</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_string\"><field name=\"VALUE\">動作</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">停止</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.All</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"1896\" y=\"0\"><mutation name=\"設定PID控制器\" functionid=\"E#!^Yz=M+HcOA$(SBR3P\"><arg name=\"基礎速度\" id=\"47k5w5ysyvwojb8bduu1i\" type=\"number\"></arg><arg name=\"kp\" id=\"9aah1voyn1sduvfugjuig\" type=\"number\"></arg><arg name=\"kd\" id=\"8p5pttj06fsdb20yts50l\" type=\"number\"></arg></mutation><field name=\"function_name\">設定PID控制器</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to set PID controller</comment><value name=\"47k5w5ysyvwojb8bduu1i\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></shadow></value><value name=\"9aah1voyn1sduvfugjuig\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">kp</field></shadow></value><value name=\"8p5pttj06fsdb20yts50l\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">kd</field></shadow></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"^/;~N-Qs.9r7J+*EMV0|\">線位置</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the line position</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_Line\"></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^/;~N-Qs.9r7J+*EMV0|\">線位置</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Xd8Q:-NfZN8Ad_h#Njz-\">Error_D</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bi-K-%d}TaWd`pcfRx7M\">Error_P_old</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bi-K-%d}TaWd`pcfRx7M\">Error_P_old</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">kp</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Xd8Q:-NfZN8Ad_h#Njz-\">Error_D</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">kd</field></block></value></block></value></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.M_R</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field></block></value></block></value><value name=\"low\"><shadow type=\"math_number\"><field name=\"NUM\">-1000</field></shadow></value><value name=\"high\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.M_L</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field></block></value></block></value><value name=\"low\"><shadow type=\"math_number\"><field name=\"NUM\">-1000</field></shadow></value><value name=\"high\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2720\" y=\"0\"><mutation name=\"巡白線\" functionid=\"LQ)]*f{t8vlA9N$)B(#G\"></mutation><field name=\"function_name\">巡白線</field><comment pinned=\"false\" h=\"80\" w=\"160\">Main function to follow the line</comment><statement name=\"STACK\"><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"設定PID控制器\" functionid=\"E#!^Yz=M+HcOA$(SBR3P\"><arg name=\"基礎速度\" id=\"47k5w5ysyvwojb8bduu1i\" type=\"number\"></arg><arg name=\"kp\" id=\"9aah1voyn1sduvfugjuig\" type=\"number\"></arg><arg name=\"kd\" id=\"8p5pttj06fsdb20yts50l\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed and PID parameters</comment><value name=\"47k5w5ysyvwojb8bduu1i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"!;aw?f/:_cAISFGu5HGd\">基礎速度</field></block></value><value name=\"9aah1voyn1sduvfugjuig\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X`[1P:~|(:3a.nzX{I1b\">kp</field></block></value><value name=\"8p5pttj06fsdb20yts50l\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vR?D!*fsjP@G-YWLRsoq\">kd</field></block></value><next><block type=\"function_call\"><mutation name=\"讀取紅外線\" functionid=\"+fLHu1nGC*{h)Qb%:}C?\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷終點\" functionid=\"k46|,a1$M*@$B;tRAJUF\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷十字T字路口\" functionid=\"#|GVw%8kR=r$RYqyBw#/\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷左普左彎\" functionid=\"mbZ9w@NpyumB8n^xe#98\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷右普右彎\" functionid=\"Vb~++o%0kKyy_E]6%_~e\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷死路\" functionid=\"{a?F?ljP_xQeH8otG6jL\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"3286\" y=\"0\"><mutation name=\"判斷十字T字路口\" functionid=\"#|GVw%8kR=r$RYqyBw#/\"></mutation><field name=\"function_name\">判斷十字T字路口</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine intersection or T-junction</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">十字</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">T字</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"639\"><mutation name=\"讀取紅外線\" functionid=\"+fLHu1nGC*{h)Qb%:}C?\"></mutation><field name=\"function_name\">讀取紅外線</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to read infrared sensors</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1Xdn^(X2kS5w?1egfVQ.\">紅外線IR3</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">5</field></shadow></value></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"489\" y=\"639\"><mutation name=\"判斷終點\" functionid=\"k46|,a1$M*@$B;tRAJUF\"></mutation><field name=\"function_name\">判斷終點</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine endpoint</comment><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1Xdn^(X2kS5w?1egfVQ.\">紅外線IR3</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">終點</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"1686\" y=\"639\"><mutation name=\"判斷左普左彎\" functionid=\"mbZ9w@NpyumB8n^xe#98\"></mutation><field name=\"function_name\">判斷左普左彎</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine left corner or left curve</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">左普</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">左彎</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"2913\" y=\"639\"><mutation name=\"判斷右普右彎\" functionid=\"Vb~++o%0kKyy_E]6%_~e\"></mutation><field name=\"function_name\">判斷右普右彎</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine right corner or right curve</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">右普</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">6</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">右彎</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1332\"><mutation name=\"判斷死路\" functionid=\"{a?F?ljP_xQeH8otG6jL\"></mutation><field name=\"function_name\">判斷死路</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine dead end\nImplement logic for detecting dead ends as needed</comment><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value></block></statement></block><block type=\"math_number\" disabled=\"true\" x=\"970\" y=\"1332\"><field name=\"NUM\">0</field></block><"],[0,"/xml>"]],"start1":1117,"start2":1117,"length1":13,"length2":30369}]},{"type":"edited","filename":"pxt.json","patch":[{"diffs":[[0," ],\n"],[-1,"    \"testFiles\": [\n        \"test.ts\"\n    ],\n"],[0,"    "]],"start1":315,"start2":315,"length1":52,"length2":8}]},{"type":"added","filename":"test.ts","value":"// 在這裡測試；當此封包作為擴充功能時，將不會編譯此內容。\n"}]}],"snapshots":[{"timestamp":1736951965164,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"^/;~N-Qs.9r7J+*EMV0|\">線位置</variable><variable id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</variable><variable id=\"Xd8Q:-NfZN8Ad_h#Njz-\">Error_D</variable><variable id=\"bi-K-%d}TaWd`pcfRx7M\">Error_P_old</variable><variable id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</variable><variable id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</variable><variable id=\"!;aw?f/:_cAISFGu5HGd\">基礎速度</variable><variable id=\"X`[1P:~|(:3a.nzX{I1b\">kp</variable><variable id=\"vR?D!*fsjP@G-YWLRsoq\">kd</variable><variable id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</variable><variable id=\"1Xdn^(X2kS5w?1egfVQ.\">紅外線IR3</variable><variable id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</variable><variable id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</variable><variable id=\"h*m}-ZzTp~5%J#o-23MB\">路口</variable><variable id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</variable><variable id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</variable><variable id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</variable><variable id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</variable><variable id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</variable><variable id=\"+4/0uZv~t]mFRrnnXV{e\">地圖資料</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"!;aw?f/:_cAISFGu5HGd\">基礎速度</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">300</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"X`[1P:~|(:3a.nzX{I1b\">kp</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">250</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"vR?D!*fsjP@G-YWLRsoq\">kd</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">210</field></shadow></value></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"316\" y=\"0\"><field name=\"NAME\">Button.A</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button A pressed event</comment><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+4/0uZv~t]mFRrnnXV{e\">地圖資料</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\"></field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"function_call\"><mutation name=\"巡白線\" functionid=\"LQ)]*f{t8vlA9N$)B(#G\"></mutation><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Square</field><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"device_clear_display\"></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_button_event\" x=\"837\" y=\"0\"><field name=\"NAME\">Button.B</field><comment pinned=\"false\" h=\"80\" w=\"160\">Button B pressed event</comment><statement name=\"HANDLER\"><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"1359\" y=\"0\"><mutation name=\"執行動作\" functionid=\"Dj.l}RQ!qwb8G9(Sc/jY\"><arg name=\"動作\" id=\"0rfzua8361kvnlqnsuwhg\" type=\"string\"></arg></mutation><field name=\"function_name\">執行動作</field><comment pinned=\"false\" h=\"80\" w=\"160\">Action execution based on map data</comment><value name=\"0rfzua8361kvnlqnsuwhg\"><shadow type=\"argument_reporter_string\"><field name=\"VALUE\">動作</field></shadow></value><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Control logic for turning left, right, etc.</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_string\"><field name=\"VALUE\">動作</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">停止</field></block></value></block></value><statement name=\"DO0\"><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.All</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">0</field></shadow></value><next><block type=\"music_playable_play\"><field name=\"playbackMode\">music.PlaybackMode.UntilDone</field><value name=\"toPlay\"><shadow type=\"music_string_playable\"></shadow><block type=\"music_tone_playable\"><value name=\"note\"><shadow type=\"device_note\"><field name=\"name\">988</field></shadow></value><value name=\"duration\"><shadow type=\"device_beat\"><field name=\"fraction\">BeatFraction.Whole</field></shadow></value></block></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"1896\" y=\"0\"><mutation name=\"設定PID控制器\" functionid=\"E#!^Yz=M+HcOA$(SBR3P\"><arg name=\"基礎速度\" id=\"47k5w5ysyvwojb8bduu1i\" type=\"number\"></arg><arg name=\"kp\" id=\"9aah1voyn1sduvfugjuig\" type=\"number\"></arg><arg name=\"kd\" id=\"8p5pttj06fsdb20yts50l\" type=\"number\"></arg></mutation><field name=\"function_name\">設定PID控制器</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to set PID controller</comment><value name=\"47k5w5ysyvwojb8bduu1i\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></shadow></value><value name=\"9aah1voyn1sduvfugjuig\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">kp</field></shadow></value><value name=\"8p5pttj06fsdb20yts50l\"><shadow type=\"argument_reporter_number\"><field name=\"VALUE\">kd</field></shadow></value><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"^/;~N-Qs.9r7J+*EMV0|\">線位置</field><comment pinned=\"false\" h=\"80\" w=\"160\">Read the line position</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_Line\"></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^/;~N-Qs.9r7J+*EMV0|\">線位置</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Xd8Q:-NfZN8Ad_h#Njz-\">Error_D</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bi-K-%d}TaWd`pcfRx7M\">Error_P_old</field></block></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bi-K-%d}TaWd`pcfRx7M\">Error_P_old</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"m_%Wi8$0,v|7oO:NRf`M\">Error_P</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">kp</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">MULTIPLY</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Xd8Q:-NfZN8Ad_h#Njz-\">Error_D</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">kd</field></block></value></block></value></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.M_R</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field></block></value></block></value><value name=\"low\"><shadow type=\"math_number\"><field name=\"NUM\">-1000</field></shadow></value><value name=\"high\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><next><block type=\"motor_MotorRun\"><field name=\"index\">BitRacer.Motors.M_L</field><value name=\"PWM\"><shadow type=\"math_number_minmax\"><mutation min=\"-1000\" max=\"1000\"></mutation><field name=\"SLIDER\">0</field></shadow><block type=\"math_constrain_value\"><value name=\"value\"><block type=\"math_arithmetic\"><field name=\"OP\">MINUS</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">基礎速度</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"Y:yXDHEH9~uc)k7dNj`A\">PID_Val</field></block></value></block></value><value name=\"low\"><shadow type=\"math_number\"><field name=\"NUM\">-1000</field></shadow></value><value name=\"high\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"2720\" y=\"0\"><mutation name=\"巡白線\" functionid=\"LQ)]*f{t8vlA9N$)B(#G\"></mutation><field name=\"function_name\">巡白線</field><comment pinned=\"false\" h=\"80\" w=\"160\">Main function to follow the line</comment><statement name=\"STACK\"><block type=\"device_while\"><value name=\"COND\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO\"><block type=\"function_call\"><mutation name=\"設定PID控制器\" functionid=\"E#!^Yz=M+HcOA$(SBR3P\"><arg name=\"基礎速度\" id=\"47k5w5ysyvwojb8bduu1i\" type=\"number\"></arg><arg name=\"kp\" id=\"9aah1voyn1sduvfugjuig\" type=\"number\"></arg><arg name=\"kd\" id=\"8p5pttj06fsdb20yts50l\" type=\"number\"></arg></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">Base speed and PID parameters</comment><value name=\"47k5w5ysyvwojb8bduu1i\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"!;aw?f/:_cAISFGu5HGd\">基礎速度</field></block></value><value name=\"9aah1voyn1sduvfugjuig\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"X`[1P:~|(:3a.nzX{I1b\">kp</field></block></value><value name=\"8p5pttj06fsdb20yts50l\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vR?D!*fsjP@G-YWLRsoq\">kd</field></block></value><next><block type=\"function_call\"><mutation name=\"讀取紅外線\" functionid=\"+fLHu1nGC*{h)Qb%:}C?\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷終點\" functionid=\"k46|,a1$M*@$B;tRAJUF\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷十字T字路口\" functionid=\"#|GVw%8kR=r$RYqyBw#/\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷左普左彎\" functionid=\"mbZ9w@NpyumB8n^xe#98\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷右普右彎\" functionid=\"Vb~++o%0kKyy_E]6%_~e\"></mutation><next><block type=\"function_call\"><mutation name=\"判斷死路\" functionid=\"{a?F?ljP_xQeH8otG6jL\"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"3286\" y=\"0\"><mutation name=\"判斷十字T字路口\" functionid=\"#|GVw%8kR=r$RYqyBw#/\"></mutation><field name=\"function_name\">判斷十字T字路口</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine intersection or T-junction</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">十字</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">T字</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">5</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"639\"><mutation name=\"讀取紅外線\" functionid=\"+fLHu1nGC*{h)Qb%:}C?\"></mutation><field name=\"function_name\">讀取紅外線</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to read infrared sensors</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1Xdn^(X2kS5w?1egfVQ.\">紅外線IR3</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">3</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"sensor_readIR2\"><value name=\"SensorID\"><shadow type=\"math_number_minmax\"><mutation min=\"0\" max=\"4\" label=\"Number\" precision=\"0\"></mutation><field name=\"SLIDER\">5</field></shadow></value></block></value></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"489\" y=\"639\"><mutation name=\"判斷終點\" functionid=\"k46|,a1$M*@$B;tRAJUF\"></mutation><field name=\"function_name\">判斷終點</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine endpoint</comment><statement name=\"STACK\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"1Xdn^(X2kS5w?1egfVQ.\">紅外線IR3</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">3000</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"variables_change\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">40</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">終點</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">9</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"acOS5!%kS2s+D~6A_{V,\">找到終點</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"SxB20MS$xZ?$w)VKCq1k\">終點時間</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block></statement></block><block type=\"function_definition\" x=\"1686\" y=\"639\"><mutation name=\"判斷左普左彎\" functionid=\"mbZ9w@NpyumB8n^xe#98\"></mutation><field name=\"function_name\">判斷左普左彎</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine left corner or left curve</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"~mg6|Zxcidk-kVv[Ov]C\">紅外線IR1</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">左普</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">左彎</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"2913\" y=\"639\"><mutation name=\"判斷右普右彎\" functionid=\"Vb~++o%0kKyy_E]6%_~e\"></mutation><field name=\"function_name\">判斷右普右彎</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine right corner or right curve</comment><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"bs6CZZDYjJZ8r%t@zzZF\">紅外線IR5</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">AND</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"^Q|,nc5L(l%Y8^r%#hNK\">右邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"2,,b)1@u7cB-xx;(f?n|\">左邊紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><mutation else=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"a-`{zxH]NTOL(8161L}u\">中間紅外線狀態</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">右普</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">6</field></shadow></value></block></next></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"h*m}-ZzTp~5%J#o-23MB\">路口</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"text\"><field name=\"TEXT\">右彎</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"p9Mmrd~h/oEtZQzE5-|T\">路口型態</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">4</field></shadow></value></block></next></block></statement><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qK)OJRA2q*{ko-;CbT2b\">路口判斷結束</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"1332\"><mutation name=\"判斷死路\" functionid=\"{a?F?ljP_xQeH8otG6jL\"></mutation><field name=\"function_name\">判斷死路</field><comment pinned=\"false\" h=\"80\" w=\"160\">Function to determine dead end\nImplement logic for detecting dead ends as needed</comment><statement name=\"STACK\"><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow></value></block></statement></block><block type=\"math_number\" disabled=\"true\" x=\"970\" y=\"1332\"><field name=\"NUM\">0</field></block></xml>","main.ts":"let 標記線計數 = 0;\nconst 總標記線數量 = 10;\nlet 基礎速度 = 200;\nlet kp = 150;\nlet kd = 180;\nlet 紅外線IR1 = 0;\nlet 紅外線IR2 = 0;\nlet 紅外線IR4 = 0;\nlet 紅外線IR3 = 0;\nlet 紅外線IR5 = 0;\nlet Error_P_old = 0;\nlet Error_D = 0;\nlet Error_P = 0;\nlet PID_Val = 0;\nlet 線位置 = 0;\nlet 終點時間 = 0;\nlet 找到終點 = 0;\nlet 中間紅外線狀態 = 0;\nlet 左邊紅外線狀態 = 0;\nlet 右邊紅外線狀態 = 0;\nlet 路口 = \"\";\nlet 路口型態 = 0;\nlet 路口判斷結束 = 0;\n\n// 設定PID控制器\nfunction 設定PID控制器(基礎速度: number, kp: number, kd: number) {\n    線位置 = BitRacer.readLine()\n    Error_P = 0 - 線位置;\n    Error_D = Error_P - Error_P_old;\n    Error_P_old = Error_P;\n    PID_Val = Error_P * kp + Error_D * kd;\n    BitRacer.motorRun(BitRacer.Motors.M_R, Math.constrain(基礎速度 + PID_Val, -1000, 1000));\n    BitRacer.motorRun(BitRacer.Motors.M_L, Math.constrain(基礎速度 - PID_Val, -1000, 1000));\n}\n\n// 偵測標記線的函式\nfunction 判斷標記線() {\n    if ((紅外線IR5 > 1000)) {\n        basic.pause(50);\n        標記線計數 += 1;\n        //basic.showNumber(標記線計數); // 顯示當前標記線數量\n\n        if (標記線計數 >= 總標記線數量) {\n            // 到達最後一條標記線，停止動作\n            BitRacer.motorRun(BitRacer.Motors.All, 0);\n            //music.play(music.tonePlayable(988, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone);\n            //basic.showIcon(IconNames.No);\n        } else {\n            巡白線();\n        }\n    }\n}\n\n// 偵測十字路口或T字路口\n\nfunction 判斷左普左彎() {\n    if (紅外線IR1 < 1000 && 右邊紅外線狀態 == 0 && 左邊紅外線狀態 == 1) {\n        if (中間紅外線狀態 == 1) {\n            路口 = \"左普\";\n            路口型態 = 3;\n        } else {\n            路口 = \"左彎\";\n            路口型態 = 1;\n        }\n        路口判斷結束 = 1;\n    }\n}\n\n// 偵測右轉或右彎\nfunction 判斷右普右彎() {\n    if ((紅外線IR1 < 1000) || (右邊紅外線狀態 == 1 && 左邊紅外線狀態 == 0)) {\n        if (中間紅外線狀態 == 1) {\n            路口 = \"右普\";\n            路口型態 = 6;\n        } else {\n            路口 = \"右彎\";\n            路口型態 = 4;\n        }\n        路口判斷結束 = 1;\n    }\n}\n\n// 讀取紅外線感應器的數值\nfunction 讀取紅外線() {\n    紅外線IR1 = BitRacer.readIR2(1);\n    紅外線IR2 = BitRacer.readIR2(2);\n    紅外線IR3 = BitRacer.readIR2(3);\n    紅外線IR4 = BitRacer.readIR2(4);\n    紅外線IR5 = BitRacer.readIR2(5);\n}\n\n// 主程式，用來巡線並偵測終點及標記線\nfunction 巡白線() {\n    while ((標記線計數 < 總標記線數量)) {\n        // 基礎速度和PID控制\n        設定PID控制器(基礎速度, kp, kd);\n        讀取紅外線();\n        判斷標記線(); // 檢查標記線\n        //判斷終點();\n        判斷左普左彎();\n        判斷右普右彎();\n        if (標記線計數 >= 總標記線數量) {\n            break;\n        }\n    }\n}\n\n// 按下 A 鍵後開始巡線\ninput.onButtonPressed(Button.A, function () {\n    music.play(music.tonePlayable(988, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone);\n    basic.pause(1000);\n    //找到終點 = 0;\n    標記線計數 = 0;\n    巡白線();\n\n    //music.play(music.tonePlayable(988, music.beat(BeatFraction.Whole)), music.PlaybackMode.UntilDone);\n    //basic.showIcon(IconNames.Square);\n    basic.pause(1000);\n    //basic.clearScreen();\n});","README.md":"","pxt.json":"{\n    \"name\": \"比賽的範例檔案\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\",\n        \"BitRacer\": \"github:51135499/BitRacer#066fa557214aea79a82a79f73d2ddc5c665d3075\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"targetVersions\": {\n        \"target\": \"6.0.19\",\n        \"pxt\": \"9.0.12\"\n    },\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1736952001560}